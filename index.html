<!DOCTYPE html>
<html>
<head>
  <title>Zone Marker – Bengaluru Safety Map</title>
  <style>
    body { font-family: Arial, sans-serif; }
    #map { height: 90vh; width: 100%; }
    h2 { text-align: center; }
  </style>

  <!-- Google Maps API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
</head>
<body>

<h2>Zone Marker – Bengaluru</h2>
<div id="map"></div>

<script>
async function initMap() {
  const map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 12.9716, lng: 77.5946 },
    zoom: 12,
  });

  const response = await fetch("https://zone-marker-backend.onrender.com/zones");
  const zones = await response.json();

  zones.forEach(zone => {
    let color = "#00FF00";
    if (zone.zone === "red") color = "#FF0000";
    else if (zone.zone === "orange") color = "#FFA500";

    new google.maps.Circle({
      strokeColor: color,
      fillColor: color,
      fillOpacity: 0.35,
      map,
      center: { lat: zone.latitude, lng: zone.longitude },
      radius: 800
    });

    const info = new google.maps.InfoWindow({
      content: `
        <strong>${zone.area}</strong><br>
        Zone: ${zone.zone.toUpperCase()}<br>
        Cases: ${zone.cases}<br>
        Risk Probability: ${zone.probability}
      `
    });

    const marker = new google.maps.Marker({
      position: { lat: zone.latitude, lng: zone.longitude },
      map
    });

    marker.addListener("click", () => info.open(map, marker));
  });
}

window.onload = initMap;
</script>

</body>
</html>
